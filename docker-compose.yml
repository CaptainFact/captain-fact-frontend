version: "3.1"
services:
  # Pre-seeded postgres Database
  database:
    image: "captainfact/dev-db:latest"
    ports: ["5432:5432"]

  # Main API - REST + Websockets
  api:
    image: captainfact/api:staging
    command: foreground
    ports: ["4000:80"]
    depends_on: ["database"]
    environment:
      MIX_ENV: dev
      CF_SECRET_KEY_BASE: "8C6FsJwjV11d+1WPUIbkEH6gB/VavJrcXWoPLujgpclfxjkLkoNFSjVU9XfeNm6s"
      CF_HOST: localhost
      CF_DB_HOSTNAME: database
      CF_DB_USERNAME: postgres
      CF_DB_PASSWORD: postgres
      CF_DB_NAME: captain_fact_dev
      CF_FACEBOOK_APP_ID: xxxxxxxxxxxxxxxxxxxx
      CF_FACEBOOK_APP_SECRET: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
      CF_FRONTEND_URL: "http://localhost:3333"
      CF_CHROME_EXTENSION_ID: "chrome-extension://fnnhlmbnlbgomamcolcpgncflofhjckm"
